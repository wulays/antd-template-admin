import{i as X,a as Y,S as Z,H as $,v as T,s as tt,c as nt,m as et,b as at,d as st,e as it,r as rt,f as _,g as ot,h as lt,p as ut,j as ct,k as z,l as ft,u as j}from"./SVGVisualElement-62fd7acd.js";import{r as mt}from"./index-06813802.js";function ht(t){return mt.useEffect(()=>()=>t(),[])}function C(t,n,e){var a;if(typeof t=="string"){let s=document;n&&(X(!!n.current),s=n.current),e?((a=e[t])!==null&&a!==void 0||(e[t]=s.querySelectorAll(t)),t=e[t]):t=s.querySelectorAll(t)}else t instanceof Element&&(t=[t]);return Array.from(t||[])}class U{constructor(n){this.animations=n.filter(Boolean)}then(n,e){return Promise.all(this.animations).then(n).catch(e)}getAll(n){return this.animations[0][n]}setAll(n,e){for(let a=0;a<this.animations.length;a++)this.animations[a][n]=e}get time(){return this.getAll("time")}set time(n){this.setAll("time",n)}get speed(){return this.getAll("speed")}set speed(n){this.setAll("speed",n)}get duration(){let n=0;for(let e=0;e<this.animations.length;e++)n=Math.max(n,this.animations[e].duration);return n}runAll(n){this.animations.forEach(e=>e[n]())}play(){this.runAll("play")}pause(){this.runAll("pause")}stop(){this.runAll("stop")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function gt(t){return typeof t=="object"&&!Array.isArray(t)}function pt(t){const n={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},e=Y(t)?new Z(n,{enableHardwareAcceleration:!1}):new $(n,{enableHardwareAcceleration:!0});e.mount(t),T.set(t,e)}function dt(t,n=100){const e=tt({keyframes:[0,n],...t}),a=Math.min(nt(e),et);return{type:"keyframes",ease:s=>e.next(a*s).value/n,duration:at(a)}}function O(t,n,e,a){var s;return typeof n=="number"?n:n.startsWith("-")||n.startsWith("+")?Math.max(0,t+parseFloat(n)):n==="<"?e:(s=a.get(n))!==null&&s!==void 0?s:t}const yt=(t,n,e)=>{const a=n-t;return((e-t)%a+a)%a+t};function At(t,n){return st(t)?t[yt(0,t.length,n)]:t}function Et(t,n,e){for(let a=0;a<t.length;a++){const s=t[a];s.at>n&&s.at<e&&(rt(t,s),a--)}}function St(t,n,e,a,s,i){Et(t,s,i);for(let r=0;r<n.length;r++)t.push({value:n[r],at:it(s,i,a[r]),easing:At(e,r)})}function vt(t,n){return t.at===n.at?t.value===null?1:n.value===null?-1:0:t.at-n.at}const Mt="easeInOut";function Dt(t,{defaultTransition:n={},...e}={},a){const s=n.duration||.3,i=new Map,r=new Map,m={},l=new Map;let D=0,u=0,w=0;for(let S=0;S<t.length;S++){const h=t[S];if(typeof h=="string"){l.set(h,u);continue}else if(!Array.isArray(h)){l.set(h.name,O(u,h.at,D,l));continue}let[E,g,c={}]=h;c.at!==void 0&&(u=O(u,c.at,D,l));let f=0;const v=(p,d,A,V=0,b=0)=>{const o=Vt(p),{delay:x=0,times:M=ot(o),type:J="keyframes",...Q}=d;let{ease:G=n.ease||"easeOut",duration:y}=d;const K=typeof x=="function"?x(V,b):x,k=o.length;if(k<=2&&J==="spring"){let F=100;if(k===2&&xt(o)){const R=o[1]-o[0];F=Math.abs(R)}const I={...Q};y!==void 0&&(I.duration=ct(y));const N=dt(I,F);G=N.ease,y=N.duration}y??(y=s);const H=u+K,L=H+y;M.length===1&&M[0]===0&&(M[1]=1);const B=M.length-o.length;B>0&&lt(M,B),o.length===1&&o.unshift(null),St(A,o,G,M,H,L),f=Math.max(K+y,f),w=Math.max(L,w)};if(_(E)){const p=P(E,r);v(g,c,W("default",p))}else{const p=C(E,a,m),d=p.length;for(let A=0;A<d;A++){g=g,c=c;const V=p[A],b=P(V,r);for(const o in g)v(g[o],bt(c,o),W(o,b),A,d)}D=u,u+=f}}return r.forEach((S,h)=>{for(const E in S){const g=S[E];g.sort(vt);const c=[],f=[],v=[];for(let d=0;d<g.length;d++){const{at:A,value:V,easing:b}=g[d];c.push(V),f.push(ut(0,w,A)),v.push(b||"easeOut")}f[0]!==0&&(f.unshift(0),c.unshift(c[0]),v.unshift(Mt)),f[f.length-1]!==1&&(f.push(1),c.push(null)),i.has(h)||i.set(h,{keyframes:{},transition:{}});const p=i.get(h);p.keyframes[E]=c,p.transition[E]={...n,duration:w,ease:v,times:f,...e}}}),i}function P(t,n){return!n.has(t)&&n.set(t,{}),n.get(t)}function W(t,n){return n[t]||(n[t]=[]),n[t]}function Vt(t){return Array.isArray(t)?t:[t]}function bt(t,n){return t[n]?{...t,...t[n]}:{...t}}const wt=t=>typeof t=="number",xt=t=>t.every(wt);function q(t,n,e,a){const s=C(t,a),i=s.length,r=[];for(let m=0;m<i;m++){const l=s[m];T.has(l)||pt(l);const D=T.get(l),u={...e};typeof u.delay=="function"&&(u.delay=u.delay(m,i)),r.push(...ft(D,{...n,transition:u},{}))}return new U(r)}const Tt=t=>Array.isArray(t)&&Array.isArray(t[0]);function Gt(t,n,e){const a=[];return Dt(t,n,e).forEach(({keyframes:i,transition:r},m)=>{let l;_(m)?l=z(m,i.default,r.default):l=q(m,i,r),a.push(l)}),new U(a)}const Kt=t=>{function n(e,a,s){let i;return Tt(e)?i=Gt(e,a,t):gt(a)?i=q(e,a,s,t):i=z(e,a,s),t&&t.animations.push(i),i}return n};function Lt(){const t=j(()=>({current:null,animations:[]})),n=j(()=>Kt(t));return ht(()=>{t.animations.forEach(e=>e.stop())}),[t,n]}export{Lt as u};
